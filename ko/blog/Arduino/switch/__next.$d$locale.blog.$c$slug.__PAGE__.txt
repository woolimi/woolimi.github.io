1:"$Sreact.fragment"
2:I[26334,["1921","static/chunks/79812939-dd468ad34b0555ab.js","2969","static/chunks/8fdae66b-3313d3073a4d6626.js","9991","static/chunks/9991-ccaf069d2d1a3394.js","650","static/chunks/650-f48a6caa28b58c59.js","7285","static/chunks/7285-e0b078d0c178a272.js","2061","static/chunks/2061-28fac52e9cc6c1cf.js","1283","static/chunks/1283-41499aa8a4a2d40d.js","5441","static/chunks/5441-6139f8dec0b22e57.js","5784","static/chunks/app/%5Blocale%5D/blog/%5B...slug%5D/page-b33400911b20deaf.js"],"BlurFade"]
3:I[935,["1921","static/chunks/79812939-dd468ad34b0555ab.js","2969","static/chunks/8fdae66b-3313d3073a4d6626.js","9991","static/chunks/9991-ccaf069d2d1a3394.js","650","static/chunks/650-f48a6caa28b58c59.js","7285","static/chunks/7285-e0b078d0c178a272.js","2061","static/chunks/2061-28fac52e9cc6c1cf.js","1283","static/chunks/1283-41499aa8a4a2d40d.js","5441","static/chunks/5441-6139f8dec0b22e57.js","5784","static/chunks/app/%5Blocale%5D/blog/%5B...slug%5D/page-b33400911b20deaf.js"],"default"]
4:I[68708,["1921","static/chunks/79812939-dd468ad34b0555ab.js","2969","static/chunks/8fdae66b-3313d3073a4d6626.js","9991","static/chunks/9991-ccaf069d2d1a3394.js","650","static/chunks/650-f48a6caa28b58c59.js","7285","static/chunks/7285-e0b078d0c178a272.js","2061","static/chunks/2061-28fac52e9cc6c1cf.js","1283","static/chunks/1283-41499aa8a4a2d40d.js","5441","static/chunks/5441-6139f8dec0b22e57.js","5784","static/chunks/app/%5Blocale%5D/blog/%5B...slug%5D/page-b33400911b20deaf.js"],"MarkdownContent",1]
8:I[64725,[],"OutletBoundary"]
9:"$Sreact.suspense"
:HL["/_next/static/css/911e6a603adbdfb3.css","style"]
5:Tcc3,
아두이노를 사용하면서 스위치(버튼)을 제어할때 자주 사용하는 코드를 정리.

## 스위치 회로도

![switch](/switch.png)

## 라이브러리

- SwitchButton.h

```c++
#ifndef SWITCH_BUTTON_H
#define SWITCH_BUTTON_H

#include <Arduino.h>

// 스위치 버튼 클래스 (debounce 포함)
class SwitchButton {
private:
  byte pin;
  unsigned long debounceDelay;
  bool lastState;
  bool currentState;
  unsigned long lastDebounceTime;

public:
  // 생성자: 핀 번호와 debounce 지연 시간 설정 (기본값: 50ms)
  SwitchButton(byte pin, unsigned long debounceDelay = 50);

  // 초기화: 핀 모드를 INPUT_PULLUP으로 설정
  void init();

  // 버튼 상태 체크: 눌림이 감지되면 true 반환
  // loop()에서 반복적으로 호출해야 함
  bool check();

  // 버튼이 눌렸는지 확인 (한 번만 true 반환)
  bool isPressed();

  // 현재 버튼 상태 반환
  bool getState();
};

#endif
```

- SwitchButton.cpp

```c++
#include "SwitchButton.h"

// 생성자: 핀 번호와 debounce 지연 시간 설정
SwitchButton::SwitchButton(byte pin, unsigned long debounceDelay) {
  this->pin = pin;
  this->debounceDelay = debounceDelay;
  this->lastState = LOW;
  this->currentState = HIGH;
  this->lastDebounceTime = 0;
}

// 초기화: 핀 모드를 INPUT_PULLUP으로 설정하고 실제 상태로 초기화
void SwitchButton::init() {
  pinMode(pin, INPUT_PULLUP);
  // 실제 핀 상태를 읽어서 초기화 (버튼이 눌리지 않은 상태로 시작)
  int reading = digitalRead(pin);
  this->lastState = reading;
  this->currentState = reading;
  this->lastDebounceTime = millis(); // debounce 타이머를 현재 시간으로 설정
}

// 버튼 상태 체크: 눌림이 감지되면 true 반환
bool SwitchButton::check() {
  int reading = digitalRead(pin);

  // 초기화되지 않은 경우 (lastDebounceTime이 0이면) 초기화
  if (lastDebounceTime == 0) {
    lastState = reading;
    currentState = reading;
    lastDebounceTime = millis();
    return false;  // 초기화 중이므로 버튼이 눌리지 않은 것으로 처리
  }

  // 상태가 변경되면 debounce 타이머 리셋
  if (reading != lastState) {
    lastDebounceTime = millis();
  }

  // debounce 시간이 지났는지 확인
  if ((millis() - lastDebounceTime) > debounceDelay) {
    // 안정된 상태가 변경되었는지 확인
    if (reading != currentState) {
      currentState = reading;
      // 버튼이 눌렸을 때 (LOW = 눌림, HIGH = 안 눌림, INPUT_PULLUP 사용 시)
      if (currentState == LOW) {
        lastState = reading;
        return true;  // 버튼이 눌림
      }
    }
  }

  lastState = reading;
  return false;  // 버튼이 눌리지 않음
}

// 버튼이 눌렸는지 확인 (한 번만 true 반환)
bool SwitchButton::isPressed() {
  return check();
}

// 현재 버튼 상태 반환
bool SwitchButton::getState() {
  return currentState;
}


```

- 사용법

```c++
#include "SwitchButton.h"

// 스위치 버튼 객체 생성
SwitchButton switchButton(SWITCH_PIN, 50);  // 핀 번호, debounce delay (ms)

void setup() {
  // 스위치 버튼 초기화
  switchButton.init();
}

void loop() {
  if (switchButton.check()) {
    // do something...
  }
}
```
0:{"buildId":"7wrLch1PHmN9S3I0q82uc","rsc":["$","$1","c",{"children":[["$","section",null,{"id":"blog","className":"mb-30","children":["$","$L2",null,{"delay":0.04,"duration":0.5,"blur":"4px","children":[["$","nav",null,{"aria-label":"breadcrumb","data-slot":"breadcrumb","className":"mb-6","children":["$","ol",null,{"data-slot":"breadcrumb-list","className":"text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5","children":[["$","li","item-0",{"data-slot":"breadcrumb-item","className":"inline-flex items-center gap-1.5","children":["$","$L3",null,{"ref":null,"href":"/ko","localeCookie":{"name":"NEXT_LOCALE","sameSite":"lax"},"children":"Home","data-slot":"breadcrumb-link","className":"hover:text-foreground transition-colors"}]}],["$","li","separator-1",{"data-slot":"breadcrumb-separator","role":"presentation","aria-hidden":"true","className":"[&>svg]:size-3.5","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-right","aria-hidden":"true","children":[["$","path","mthhwq",{"d":"m9 18 6-6-6-6"}],"$undefined"]}]}],["$","li","item-1",{"data-slot":"breadcrumb-item","className":"inline-flex items-center gap-1.5","children":["$","$L3",null,{"ref":null,"href":"/ko/blog","localeCookie":{"name":"NEXT_LOCALE","sameSite":"lax"},"children":"Blog","data-slot":"breadcrumb-link","className":"hover:text-foreground transition-colors"}]}],["$","li","separator-2",{"data-slot":"breadcrumb-separator","role":"presentation","aria-hidden":"true","className":"[&>svg]:size-3.5","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-right","aria-hidden":"true","children":[["$","path","mthhwq",{"d":"m9 18 6-6-6-6"}],"$undefined"]}]}],["$","li","item-2",{"data-slot":"breadcrumb-item","className":"inline-flex items-center gap-1.5","children":["$","$L3",null,{"ref":null,"href":"/ko/blog/Arduino","localeCookie":{"name":"NEXT_LOCALE","sameSite":"lax"},"children":"Arduino","data-slot":"breadcrumb-link","className":"hover:text-foreground transition-colors"}]}],["$","li","separator-3",{"data-slot":"breadcrumb-separator","role":"presentation","aria-hidden":"true","className":"[&>svg]:size-3.5","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-right","aria-hidden":"true","children":[["$","path","mthhwq",{"d":"m9 18 6-6-6-6"}],"$undefined"]}]}],["$","li","item-3",{"data-slot":"breadcrumb-item","className":"inline-flex items-center gap-1.5","children":["$","span",null,{"data-slot":"breadcrumb-page","role":"link","aria-disabled":"true","aria-current":"page","className":"text-foreground font-normal","children":"Arduino Switch"}]}]]}]}],["$","script",null,{"type":"application/ld+json","suppressHydrationWarning":true,"dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"Arduino Switch\",\"description\":\"아두이노에서 스위치(버튼)을 처리할때 자주 사용하는 코드\",\"image\":\"https://woolimi.github.io/og?title=Arduino Switch\",\"url\":\"https://woolimi.github.io/blog/Arduino/switch\",\"author\":{\"@type\":\"Person\",\"name\":\"박우림\"}}"}}],["$","h1",null,{"className":"text-3xl mb-4 md:mb-10 leading-none font-semibold tracking-tight sm:text-4xl sm:leading-none md:text-5xl md:leading-none lg:text-6xl lg:leading-none","children":"Arduino Switch"}],["$","article",null,{"children":["$","$L4",null,{"children":"$5"}]}]]}]}],["$L6"],"$L7"]}],"loading":null,"isPartial":false}
6:["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/911e6a603adbdfb3.css","precedence":"next"}]
7:["$","$L8",null,{"children":["$","$9",null,{"name":"Next.MetadataOutlet","children":"$@a"}]}]
a:null
