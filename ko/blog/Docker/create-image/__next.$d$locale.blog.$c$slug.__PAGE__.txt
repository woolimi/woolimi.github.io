1:"$Sreact.fragment"
2:I[26334,["1921","static/chunks/79812939-dd468ad34b0555ab.js","2969","static/chunks/8fdae66b-3313d3073a4d6626.js","9991","static/chunks/9991-ccaf069d2d1a3394.js","650","static/chunks/650-f48a6caa28b58c59.js","7285","static/chunks/7285-e0b078d0c178a272.js","2061","static/chunks/2061-28fac52e9cc6c1cf.js","1283","static/chunks/1283-41499aa8a4a2d40d.js","5441","static/chunks/5441-6139f8dec0b22e57.js","5784","static/chunks/app/%5Blocale%5D/blog/%5B...slug%5D/page-b33400911b20deaf.js"],"BlurFade"]
3:I[935,["1921","static/chunks/79812939-dd468ad34b0555ab.js","2969","static/chunks/8fdae66b-3313d3073a4d6626.js","9991","static/chunks/9991-ccaf069d2d1a3394.js","650","static/chunks/650-f48a6caa28b58c59.js","7285","static/chunks/7285-e0b078d0c178a272.js","2061","static/chunks/2061-28fac52e9cc6c1cf.js","1283","static/chunks/1283-41499aa8a4a2d40d.js","5441","static/chunks/5441-6139f8dec0b22e57.js","5784","static/chunks/app/%5Blocale%5D/blog/%5B...slug%5D/page-b33400911b20deaf.js"],"default"]
4:I[68708,["1921","static/chunks/79812939-dd468ad34b0555ab.js","2969","static/chunks/8fdae66b-3313d3073a4d6626.js","9991","static/chunks/9991-ccaf069d2d1a3394.js","650","static/chunks/650-f48a6caa28b58c59.js","7285","static/chunks/7285-e0b078d0c178a272.js","2061","static/chunks/2061-28fac52e9cc6c1cf.js","1283","static/chunks/1283-41499aa8a4a2d40d.js","5441","static/chunks/5441-6139f8dec0b22e57.js","5784","static/chunks/app/%5Blocale%5D/blog/%5B...slug%5D/page-b33400911b20deaf.js"],"MarkdownContent",1]
8:I[64725,[],"OutletBoundary"]
9:"$Sreact.suspense"
:HL["/_next/static/css/911e6a603adbdfb3.css","style"]
5:Tfad,

Docker 이미지를 만드는 방법은 크게 두 가지:
1. **컨테이너에서 commit**: 실행 중인 컨테이너를 수정한 후 새로운 이미지로 저장
2. **Dockerfile 사용**: 설정 파일을 통해 이미지 빌드 (권장)

이 문서에서는 첫 번째 방법인 commit을 사용한 이미지 생성 과정을 설명한다.


## Commit 을 이용해서 이미지를 생성하는 방법

먼저 Ubuntu 24.04 이미지를 다운로드한다.

```bash
docker pull ubuntu:24.04
```

이미지가 이미 있다면 생략할 수 있다. 확인하려면:

```bash
docker images
```

Ubuntu 24.04 이미지로 컨테이너를 실행하고 접속한다.

```bash
docker run --name python3 -it ubuntu:24.04 /bin/bash
```

- `-it`: 인터랙티브 모드로 실행 (터미널과 상호작용 가능)
- `--name`: 이름을 지정하면 ID 뿐만 아니라 이름으로도 컨테이너를 참조 가능
- `ubuntu:24.04`: 사용할 이미지
- `/bin/bash`: 실행할 명령어 (bash 셸)

이제 컨테이너 내부에서 작업할 수 있다. 컨테이너 내부에서 먼저 패키지 목록을 업데이트한다.

```bash
apt update
```

> **참고**: 컨테이너 내부에서는 `sudo`가 필요 없다. 기본적으로 root 권한으로 실행된다.

Python3와 pip3를 설치한다.

```bash
apt install -y python3 python3-pip
```

설치가 완료되면 확인한다:

```bash
python3 --version
pip3 --version
```

pip3가 설치되었으므로 NumPy를 설치해보자.

Ubuntu 24.04에서는 시스템 패키지와 충돌을 방지하기 위해 pip로 직접 패키지를 설치할 때 `externally-managed-environment` 에러가 발생할 수 있다. 

이를 해결하기 위해 다음 명령어를 실행:

```bash
# externally-managed-environment 에러 해결
python3 -m pip config set global.break-system-packages true
```

설정 후 NumPy를 설치:

```bash
pip3 install numpy
```

설치가 완료되면 확인:

```bash
python3 -c "import numpy; print(numpy.__version__)"
```

설치가 완료되었으므로 컨테이너를 종료한다.

```bash
exit
```

종료된 컨테이너를 새로운 이미지로 저장한다. 먼저 컨테이너 ID를 확인한다:

```bash
docker ps -a
```

마지막으로 실행했던 컨테이너의 ID를 확인한 후 commit한다:

```bash
docker commit <컨테이너ID> ubuntu24.04:python3
```

또는 컨테이너 이름을 사용할 수도 있다:

```bash
docker commit <컨테이너이름> ubuntu24.04:python3
```

> **이미지 이름 규칙**: `이미지명:태그` 형식으로 지정한다. 태그를 생략하면 `latest`가 기본값이다.


새로 만든 이미지가 생성되었는지 확인한다.

```bash
docker images
```

출력 예시:

```
REPOSITORY          TAG       IMAGE ID       CREATED         SIZE
ubuntu24.04         python3   abc123def456   2 minutes ago   250MB
ubuntu              24.04     xyz789uvw012   1 week ago      100MB
```

새로 만든 이미지로 컨테이너를 실행하여 Python3, pip3, NumPy가 제대로 설치되었는지 확인한다.

```bash
docker run --name test -it ubuntu24.04:python3 /bin/bash
```

컨테이너 내부에서:

```bash
python3 --version
pip3 --version
python3 -c "import numpy; print(numpy.__version__)"
```

정상적으로 설치되었다면 각각의 버전 정보가 출력된다.


## Dockerfile 방식

commit 방식은 간단하지만, Dockerfile을 사용하는 게 더 권장된다:
- 재현 가능성
- 버전 관리 가능
- 자동화 가능
- 더 명확한 문서화

같은 작업을 Dockerfile로 하면 다음과 같다:

```dockerfile
FROM ubuntu:24.04

RUN apt update && \
    apt install -y python3 python3-pip && \
    apt clean && \
    rm -rf /var/lib/apt/lists/*

# externally-managed-environment 에러 해결
RUN python3 -m pip config set global.break-system-packages true

# NumPy 설치
RUN pip3 install numpy

CMD ["/bin/bash"]
```

빌드:

```bash
docker build -t ubuntu24.04:python3 .
```

이 방식이 더 권장되는 방법이다.


0:{"buildId":"7wrLch1PHmN9S3I0q82uc","rsc":["$","$1","c",{"children":[["$","section",null,{"id":"blog","className":"mb-30","children":["$","$L2",null,{"delay":0.04,"duration":0.5,"blur":"4px","children":[["$","nav",null,{"aria-label":"breadcrumb","data-slot":"breadcrumb","className":"mb-6","children":["$","ol",null,{"data-slot":"breadcrumb-list","className":"text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5","children":[["$","li","item-0",{"data-slot":"breadcrumb-item","className":"inline-flex items-center gap-1.5","children":["$","$L3",null,{"ref":null,"href":"/ko","localeCookie":{"name":"NEXT_LOCALE","sameSite":"lax"},"children":"Home","data-slot":"breadcrumb-link","className":"hover:text-foreground transition-colors"}]}],["$","li","separator-1",{"data-slot":"breadcrumb-separator","role":"presentation","aria-hidden":"true","className":"[&>svg]:size-3.5","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-right","aria-hidden":"true","children":[["$","path","mthhwq",{"d":"m9 18 6-6-6-6"}],"$undefined"]}]}],["$","li","item-1",{"data-slot":"breadcrumb-item","className":"inline-flex items-center gap-1.5","children":["$","$L3",null,{"ref":null,"href":"/ko/blog","localeCookie":{"name":"NEXT_LOCALE","sameSite":"lax"},"children":"Blog","data-slot":"breadcrumb-link","className":"hover:text-foreground transition-colors"}]}],["$","li","separator-2",{"data-slot":"breadcrumb-separator","role":"presentation","aria-hidden":"true","className":"[&>svg]:size-3.5","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-right","aria-hidden":"true","children":[["$","path","mthhwq",{"d":"m9 18 6-6-6-6"}],"$undefined"]}]}],["$","li","item-2",{"data-slot":"breadcrumb-item","className":"inline-flex items-center gap-1.5","children":["$","$L3",null,{"ref":null,"href":"/ko/blog/Docker","localeCookie":{"name":"NEXT_LOCALE","sameSite":"lax"},"children":"Docker","data-slot":"breadcrumb-link","className":"hover:text-foreground transition-colors"}]}],["$","li","separator-3",{"data-slot":"breadcrumb-separator","role":"presentation","aria-hidden":"true","className":"[&>svg]:size-3.5","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-chevron-right","aria-hidden":"true","children":[["$","path","mthhwq",{"d":"m9 18 6-6-6-6"}],"$undefined"]}]}],["$","li","item-3",{"data-slot":"breadcrumb-item","className":"inline-flex items-center gap-1.5","children":["$","span",null,{"data-slot":"breadcrumb-page","role":"link","aria-disabled":"true","aria-current":"page","className":"text-foreground font-normal","children":"Docker 이미지 생성"}]}]]}]}],["$","script",null,{"type":"application/ld+json","suppressHydrationWarning":true,"dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"Docker 이미지 생성\",\"description\":\"Ubuntu 24.04 이미지를 기반으로 Python3와 pip3를 설치하고 commit을 통해 새로운 이미지를 만드는 과정을 설명한다.\",\"image\":\"https://woolimi.github.io/og?title=Docker 이미지 생성\",\"url\":\"https://woolimi.github.io/blog/Docker/create-image\",\"author\":{\"@type\":\"Person\",\"name\":\"박우림\"}}"}}],["$","h1",null,{"className":"text-3xl mb-4 md:mb-10 leading-none font-semibold tracking-tight sm:text-4xl sm:leading-none md:text-5xl md:leading-none lg:text-6xl lg:leading-none","children":"Docker 이미지 생성"}],["$","article",null,{"children":["$","$L4",null,{"children":"$5"}]}]]}]}],["$L6"],"$L7"]}],"loading":null,"isPartial":false}
6:["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/911e6a603adbdfb3.css","precedence":"next"}]
7:["$","$L8",null,{"children":["$","$9",null,{"name":"Next.MetadataOutlet","children":"$@a"}]}]
a:null
