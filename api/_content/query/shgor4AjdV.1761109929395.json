{"_path":"/codes/web3/solidity","_dir":"web3","_draft":false,"_partial":false,"_locale":"","title":"Solidity","description":"Solidity basic","category":["Web3"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"solidity"},"children":[{"type":"text","value":"Solidity"}]},{"type":"element","tag":"table-of-content","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"modifiers"},"children":[{"type":"text","value":"modifiers"}]},{"type":"element","tag":"h3","props":{"id":"_1-visibility-modifiers"},"children":[{"type":"text","value":"1. Visibility modifiers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"tell us how the function interacts with the BlockChain"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":": only callable from other functions inside the contract"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"internal"}]},{"type":"text","value":": like private but can also be called by contracts that inherit from this one"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"external"}]},{"type":"text","value":": can only be accessed from external contracts or accounts"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":": can be called anywhere, both internally and externally"}]}]},{"type":"element","tag":"h3","props":{"id":"_2-state-modifiers"},"children":[{"type":"text","value":"2. State modifiers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"tell us how the function interacts with the BlockChain"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"view: by running the function, no data will be saved/changed"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"pure: not only does the function not save any data to the blockchain, but it also doesn't read any data from the blockchain"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"view"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pure"}]},{"type":"text","value":" don't cost any gas to call if they're called externally from outside the contract (but they do cost gas if called internally by another function)"}]},{"type":"element","tag":"h3","props":{"id":"_3-custom-modifiers"},"children":[{"type":"text","value":"3. Custom modifiers"}]},{"type":"element","tag":"pre","props":{"className":"language-solidity shiki shiki-themes github-dark","code":"contract MyContract {\n    address owner;\n\n    modifier onlyOwner() {\n        require(msg.sender == owner);\n        _;\n    }\n}\n","language":"solidity","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"contract"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" MyContract"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"    address"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" owner;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"    modifier"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" onlyOwner"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"        require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"msg.sender"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" =="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" owner);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"        _"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_4-payable-modifier"},"children":[{"type":"text","value":"4. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"payable"}]},{"type":"text","value":" modifier"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Special type of function that can receive Ether."}]},{"type":"element","tag":"pre","props":{"className":"language-solidity shiki shiki-themes github-dark","code":"contract OnlineStore {\n  function buySomething() external payable {\n    // Check to make sure 0.001 ether was sent to the function call:\n    require(msg.value == 0.001 ether);\n    // If so, some logic to transfer the digital item to the caller of the function:\n    transferThing(msg.sender);\n  }\n}\n","language":"solidity","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"contract"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" OnlineStore"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"  function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" buySomething"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"external"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" payable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"    // Check to make sure 0.001 ether was sent to the function call:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"    require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"msg"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":".value "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 0.001"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" ether"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"    // If so, some logic to transfer the digital item to the caller of the function:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"    transferThing"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"msg.sender"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"DApp's JS frontend"}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-dark","code":"// Assuming `OnlineStore` points to your contract on Ethereum:\nOnlineStore.buySomething({from: web3.eth.defaultAccount, value: web3.utils.toWei(0.001)})\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// Assuming `OnlineStore` points to your contract on Ethereum:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"OnlineStore."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"buySomething"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"({from: web3.eth.defaultAccount, value: web3.utils."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"toWei"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"0.001"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":")})\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"data-locations"},"children":[{"type":"text","value":"Data Locations"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When declaring reference type variables(Array, Struct, Mapping) in Solidity, you must specify data location."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"storage"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"refers to the space where state variables are stored. That is, all state variables are stored in Storage. In fact, all data stored in blockchain corresponds to storage."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"memory"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Memory literally means a place where "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"volatile data"}]},{"type":"text","value":" that exists only when a function call (external function call) is located. Data is copied from calldata passed as a function argument to new memory and used."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"calldata"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Only available for external function call parameters. The main difference between Calldata and Memory is that "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Memory can be modified, but Calldata cannot be modified"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, in the case of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"mapping"}]},{"type":"text","value":", only Storage is allowed, like state variables. Bytes and string types are also treated as arrays. Therefore, the Data Location must be specified for these types too."}]},{"type":"element","tag":"block","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Best practice for data location"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If you want to store reference type variables directly in the blockchain and update their values, use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"storage"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If you only need to read, or do not need to update state on the blockchain, but need to modify it, use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"memory"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You can save gas by using the calldata keyword as a function parameter. Therefore, unless there is a special reason, use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"calldata"}]},{"type":"text","value":"."}]}]}]},{"type":"element","tag":"h2","props":{"id":"resources"},"children":[{"type":"text","value":"Resources"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://cryptozombies.io/en/course","rel":["nofollow"]},"children":[{"type":"text","value":"https://cryptozombies.io/en/course"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://youtu.be/m2z_FrOeG08?si=C0IAzIrAgL7MCQwF","rel":["nofollow"]},"children":[{"type":"text","value":"https://youtu.be/m2z_FrOeG08?si=C0IAzIrAgL7MCQwF"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://medium.com/@aiden.p/solidity-%EC%94%A8-%EB%A6%AC%EC%A6%88-%EC%9D%80%EA%B7%BC-%ED%97%B7%EA%B0%88%EB%A6%AC%EB%8A%94-data-location-2690cefb72db","rel":["nofollow"]},"children":[{"type":"text","value":"은근 헷갈리는 Data Location"}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"modifiers","depth":2,"text":"modifiers","children":[{"id":"_1-visibility-modifiers","depth":3,"text":"1. Visibility modifiers"},{"id":"_2-state-modifiers","depth":3,"text":"2. State modifiers"},{"id":"_3-custom-modifiers","depth":3,"text":"3. Custom modifiers"},{"id":"_4-payable-modifier","depth":3,"text":"4. payable modifier"}]},{"id":"data-locations","depth":2,"text":"Data Locations"},{"id":"resources","depth":2,"text":"Resources"}]}},"_type":"markdown","_id":"content:codes:Web3:01.solidity.md","_source":"content","_file":"codes/Web3/01.solidity.md","_stem":"codes/Web3/01.solidity","_extension":"md","createdAt":"2024-06-20T20:37:01.000Z","updatedAt":"2024-06-29T09:09:07.000Z"}